(function(){
	var a=window.Xmeb||{};
	a={
		_INSTALL:function(){
			window.Xmeb=a;
		}
		,App:{}
	};
	a.App={
		getBLength:function(b){
			return $.trim(b).replace(/[^\x00-\xff]/g,"**").length;
		}
		,xmFocus:{
			init:function(e,b){
				var g=this;
				this._obj=e;
				this.mlength=this._obj.find("a").length;
				this.setOptions(b);
				this.mwidth=this.options.mwidth;
				this.mtime1=this.options.mtime1;
				this.mtime2=this.options.mtime2;
				this.autoWidth=this.options.autoWidth;
				this._obj.css({
					width:this.mwidth
				});
				if(this.mlength===1){
					return;
				}
				this.ul=this._obj.find("ul");
				for(var c=0;c<this.mlength;
				c++){
					$('<li class="slideshow-bt" index="'+(this.mlength-c)+'"></li>').appendTo(this.ul);
				}
				this.ul.find(".slideshow-bt:last").addClass("on");
				this.ul.find(".slideshow-bt").mouseenter(function(h){
					g.slideTo(this);
				});
				var d=true;
				this._obj.mouseenter(function(){
					d=false;
				}).mouseleave(function(){
					d=true;
				});
				var f=g.mtime1;
				setInterval(function(){
					if(d){
						g.slideDown();
					}
				}
				,f);
			}
			,setOptions:function(b){
				this.options={
					mwidth:1024,mtime1:5000,mtime2:500,autoWidth:false,AllowAutoSlide:false
				};
				for(var c in b){
					this.options[c]=b[c];
				}
			}
			,slideDown:function(){
				var d=this;
				var c=d.ul.find(".slideshow-bt.on");
				if(c.length<=0){
					return;
				}
				var b=c.get(0).previousSibling;
                b=$(".slideshow-bt.on").prev();
				d.slideTo(b.length==1?b:d.ul.find(".slideshow-bt:last").get(0));
			}
			,slideTo:function(f){
				var g=this;
				if(!f){
					return;
				}
				var b=g.ul.find(".slideshow-bt.on").attr("index"),e=this._obj.find("a[index="+b+"]");
				var d=this._obj.find("a[index="+$(f).attr("index")+"]");
				if(b==$(f).attr("index")){
					return;
				}
				//Download by http://www.codefans.net
				if(d.find("img[imgsrc]").length>0){
					var c=d.find("img[imgsrc]");
					c.attr("src",c.attr("imgsrc")).removeAttr("imgsrc");
				}
				g.ul.find(".slideshow-bt.on").removeClass("on");
				$(f).addClass("on");
				d.css("z-index",2);
				e.css("z-index",3).fadeOut(300,function(){
					$(this).css("z-index","1").show();
					var h=d.next("a").find("img[imgsrc]");
					if(h.length>0){
						h.attr("src",h.attr("imgsrc")).removeAttr("imgsrc");
					}
				});
			}
		}
	};
	a._INSTALL();
})();